

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>How to use FreeRTOS &mdash; ARC Labs 2018.09 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/style_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="ARC DSP: Compiler Optimizations" href="lab_dsp1.html" />
    <link rel="prev" title="BLE Communication" href="lab7.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> ARC Labs
          

          
          </a>

          
            
            
              <div class="version">
                2018.09
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/introduction.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/getting_started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../labs.html">Hands-on labs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../level1.html">Basic labs</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../level2.html">Advanced labs</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="lab8.html">Memory map and linker</a></li>
<li class="toctree-l3"><a class="reference internal" href="lab10.html">A WiFi temperature monitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="lab7.html">BLE Communication</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">How to use FreeRTOS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#purpose">Purpose</a></li>
<li class="toctree-l4"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#content">Content</a></li>
<li class="toctree-l4"><a class="reference internal" href="#principles">Principles</a></li>
<li class="toctree-l4"><a class="reference internal" href="#steps">Steps</a></li>
<li class="toctree-l4"><a class="reference internal" href="#exercises">Exercises</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="lab_dsp1.html">ARC DSP: Compiler Optimizations</a></li>
<li class="toctree-l3"><a class="reference internal" href="lab_dsp2.html">ARC DSP: Using FXAPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="lab_dsp3.html">ARC DSP: Using DSP Library</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../level3.html">Exploration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../appendix/appendix.html">Appendix</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ARC Labs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../labs.html">Hands-on labs</a> &raquo;</li>
        
          <li><a href="../level2.html">Advanced labs</a> &raquo;</li>
        
      <li>How to use FreeRTOS</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/labs/level2/lab9.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="how-to-use-freertos">
<span id="lab9"></span><h1>How to use FreeRTOS<a class="headerlink" href="#how-to-use-freertos" title="Permalink to this headline">¶</a></h1>
<div class="section" id="purpose">
<h2>Purpose<a class="headerlink" href="#purpose" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>To learn how to implement tasks in FreeRTOS operating system</li>
<li>To learn how to register tasks in FreeRTOS</li>
<li>To get familiar with inter-task communication of FreeRTOS</li>
</ul>
</div>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>The following hardware and tools are required:</p>
<ul class="simple">
<li>PC host</li>
<li>GNU Toolchain for ARC Processors / MetaWare Development Toolkit</li>
<li>ARC board (EM Starter Kit / IoT Development Kit)</li>
<li>embARC OSP package</li>
<li><code class="docutils literal notranslate"><span class="pre">embarc_osp/arc_labs/labs/lab9_freertos</span></code></li>
</ul>
</div>
<div class="section" id="content">
<h2>Content<a class="headerlink" href="#content" title="Permalink to this headline">¶</a></h2>
<p>This lab utilizes FreeRTOS v9.0.0, and creates 3 tasks based on embARC OSP. You should apply inter-task communicating methods such as semaphore and message queue in order to get running LEDs result. You should know the basic functions of FreeRTOS.</p>
</div>
<div class="section" id="principles">
<h2>Principles<a class="headerlink" href="#principles" title="Permalink to this headline">¶</a></h2>
<div class="section" id="background">
<h3>Background<a class="headerlink" href="#background" title="Permalink to this headline">¶</a></h3>
<p>Operating System is software that controls basic hardware and software resources and provides access to them as a service for applications. In this sense applications that are used by users are said to be run on top of or inside the operating system.</p>
<p>There are different kind of operating systems and many definitions of OSes depending on the available features. One of the main features of every OS is how it organizes several tasks (programs) to work together. Some OSes execute only one task at the time (these are called single-tasking) other allow multiple programs to work together (multi-tasking). Most common desktop operating systems are multi-tasking (Linux, Windows, etc.).</p>
<p>As processors on which programs are executed are sequential devices, technically only single program can be run at a time on a processor. However, multi-tasking does periodical switching between several tasks creating an illusion that these tasks work in parallel. The part of operating system that does this work is called scheduler. Scheduler is a routine that decides the order of execution of several tasks running on OS.</p>
<p>Depending on scheduler multi-tasking algorithm OSes are classified on real-time and non-real-time. In desktop operating systems (Linux, Windows) the usual approach of scheduler is to try to distribute processor time evenly between running application, so that each uses fair amount of resources. However, this approach has significant drawback which is unpredictable times when specific task will be running. On the other hand, some applications (especially embedded) are time constrained and thus require deterministic execution of tasks. For example, if embedded system is controlling industrial machinery then software application is controlling some operation in the machine, which should be done at specific times disregarding of what other operations are pending. For this purpose, schedulers in some operating systems are made in a way to start tasks and predefined times. Such operating systems are called real-time operating systems (RTOS), because each task (application) running in RTOS can specify specific time (in milliseconds or other real time unit) at which it should be started. To organize this for several tasks scheduler uses priorities set for tasks, so that if two applications requested to be called at the same time, the one with higher priority gets the resources.</p>
<p>As resources becoming abundant for modern micro processors, the cost to run RTOS becomes increasingly insignificant. RTOS also provides event-driven mode for better utilization of CPU with efficiency.</p>
<p>FreeRTOS is an implementation of RTOS specially designed to be compact, easy to use and freely available (under GPL license with several exceptions). FreeRTOS source code is available for download at <a class="reference external" href="http://freertos.org">http://freertos.org</a> and for different processor it could be ported (architecture specific code needs to be changed) so that it can operate on the specific processor. embARC OSP includes FreeRTOS port for DesignWare® ARC® processors that can be used to run applications using RTOS. FreeRTOS contains all the basic features of RTOS: tasks, scheduler, notifications, semaphores, mutexes, etc.</p>
</div>
<div class="section" id="design">
<h3>Design<a class="headerlink" href="#design" title="Permalink to this headline">¶</a></h3>
<p>This lab implements a running LED light with 3 tasks on FreeRTOS. Despite using 3 tasks overkill for a running LED, but it is beneficial for the understanding of FreeRTOS itself and inter-task communication as well.</p>
<p>The following is the flow chart of the program:</p>
<img alt="program flow chart" src="../../_images/lab9_program_flow_chart.png" />
</div>
<div class="section" id="realization">
<h3>Realization<a class="headerlink" href="#realization" title="Permalink to this headline">¶</a></h3>
<p>The following is the example code of system , including various initialization and task time delay.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;embARC.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;embARC_debug.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">task1</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">par</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">task2</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">par</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">task3</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">par</span><span class="p">);</span>

<span class="cp">#define TSK_PRIOR_1             (configMAX_PRIORITIES-1)</span>
<span class="cp">#define TSK_PRIOR_2             (configMAX_PRIORITIES-2)</span>
<span class="cp">#define TSK_PRIOR_3             (configMAX_PRIORITIES-3)</span>

<span class="c1">// Semaphores</span>
<span class="k">static</span> <span class="n">SemaphoreHandle_t</span> <span class="n">sem1_id</span><span class="p">;</span>

<span class="c1">// Queues</span>
<span class="k">static</span> <span class="n">QueueHandle_t</span> <span class="n">dtq1_id</span><span class="p">;</span>

<span class="c1">// Task IDs</span>
<span class="k">static</span> <span class="n">TaskHandle_t</span> <span class="n">task1_handle</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="k">static</span> <span class="n">TaskHandle_t</span> <span class="n">task2_handle</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="k">static</span> <span class="n">TaskHandle_t</span> <span class="n">task3_handle</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
        <span class="n">vTaskSuspendAll</span><span class="p">();</span>

        <span class="c1">// Create Tasks</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">xTaskCreate</span><span class="p">(</span><span class="n">task1</span><span class="p">,</span> <span class="s">&quot;task1&quot;</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span><span class="mi">1</span><span class="p">,</span> <span class="n">TSK_PRIOR_1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">task1_handle</span><span class="p">)</span>     <span class="o">!=</span> <span class="n">pdPASS</span><span class="p">){</span>
                <span class="cm">/*!&lt; FreeRTOS xTaskCreate() API function */</span>
                <span class="n">EMBARC_PRINTF</span><span class="p">(</span><span class="s">&quot;Create task1 Failed</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">);</span>
                <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="n">EMBARC_PRINTF</span><span class="p">(</span><span class="s">&quot;Create task1 Successfully</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">xTaskCreate</span><span class="p">(</span><span class="n">task2</span><span class="p">,</span> <span class="s">&quot;task2&quot;</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span><span class="mi">2</span><span class="p">,</span> <span class="n">TSK_PRIOR_2</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">task2_handle</span><span class="p">)</span>     <span class="o">!=</span> <span class="n">pdPASS</span><span class="p">){</span>
                <span class="cm">/*!&lt; FreeRTOS xTaskCreate() API function */</span>
                <span class="n">EMBARC_PRINTF</span><span class="p">(</span><span class="s">&quot;Create task2 Failed</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">);</span>
                <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="n">EMBARC_PRINTF</span><span class="p">(</span><span class="s">&quot;Create task2 Successfully</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">xTaskCreate</span><span class="p">(</span><span class="n">task3</span><span class="p">,</span> <span class="s">&quot;task3&quot;</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span><span class="mi">3</span><span class="p">,</span> <span class="n">TSK_PRIOR_3</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">task3_handle</span><span class="p">)</span>     <span class="o">!=</span> <span class="n">pdPASS</span><span class="p">){</span>
                <span class="cm">/*!&lt; FreeRTOS xTaskCreate() API function */</span>
                <span class="n">EMBARC_PRINTF</span><span class="p">(</span><span class="s">&quot;Create task3 Failed</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">);</span>
                <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="n">EMBARC_PRINTF</span><span class="p">(</span><span class="s">&quot;Create task3 Successfully</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="c1">// Create Semaphores</span>
        <span class="n">sem1_id</span> <span class="o">=</span> <span class="n">xSemaphoreCreateBinary</span><span class="p">();</span>
        <span class="n">xSemaphoreGive</span><span class="p">(</span><span class="n">sem1_id</span><span class="p">);</span>

        <span class="c1">// Create Queues</span>
        <span class="n">dtq1_id</span> <span class="o">=</span> <span class="n">xQueueCreate</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">uint32_t</span><span class="p">));</span>

        <span class="n">xTaskResumeAll</span><span class="p">();</span>
        <span class="n">vTaskSuspend</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>

        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">task1</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">par</span><span class="p">)</span>
<span class="p">{</span>
        <span class="kt">uint32_t</span> <span class="n">led_val</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

        <span class="k">static</span> <span class="n">portTickType</span> <span class="n">xLastWakeTime</span><span class="p">;</span>
        <span class="k">const</span> <span class="n">portTickType</span> <span class="n">xFrequency</span> <span class="o">=</span> <span class="n">pdMS_TO_TICKS</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>

        <span class="c1">// Use current time to init xLastWakeTime, mind the difference with vTaskDelay()</span>
        <span class="n">xLastWakeTime</span> <span class="o">=</span> <span class="n">xTaskGetTickCount</span><span class="p">();</span>

        <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                <span class="cm">/* call Freertos system function for 10ms delay */</span>
                <span class="n">vTaskDelayUntil</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">xLastWakeTime</span><span class="p">,</span><span class="n">xFrequency</span> <span class="p">);</span>

                <span class="c1">//####Insert code here###</span>
        <span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">task2</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">par</span><span class="p">)</span>
<span class="p">{</span>
        <span class="kt">uint32_t</span> <span class="n">led_val</span> <span class="o">=</span> <span class="mh">0x0001</span><span class="p">;</span>

        <span class="k">static</span> <span class="n">portTickType</span> <span class="n">xLastWakeTime</span><span class="p">;</span>
        <span class="k">const</span> <span class="n">portTickType</span> <span class="n">xFrequency</span> <span class="o">=</span> <span class="n">pdMS_TO_TICKS</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>

        <span class="c1">// Use current time to init xLastWakeTime, mind the difference with vTaskDelay()</span>
        <span class="n">xLastWakeTime</span> <span class="o">=</span> <span class="n">xTaskGetTickCount</span><span class="p">();</span>

        <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                <span class="cm">/* call Freertos system function for 100ms delay */</span>
                <span class="n">vTaskDelayUntil</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">xLastWakeTime</span><span class="p">,</span><span class="n">xFrequency</span> <span class="p">);</span>

                <span class="c1">//####Insert code here###</span>
        <span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">task3</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">par</span><span class="p">)</span>
<span class="p">{</span>
        <span class="kt">uint32_t</span> <span class="n">led_val</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

        <span class="k">static</span> <span class="n">portTickType</span> <span class="n">xLastWakeTime</span><span class="p">;</span>
        <span class="k">const</span> <span class="n">portTickType</span> <span class="n">xFrequency</span> <span class="o">=</span> <span class="n">pdMS_TO_TICKS</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>

        <span class="c1">// Use current time to init xLastWakeTime, mind the difference with vTaskDelay()</span>
        <span class="n">xLastWakeTime</span> <span class="o">=</span> <span class="n">xTaskGetTickCount</span><span class="p">();</span>

        <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                <span class="cm">/* call Freertos system function for 100ms delay */</span>
                <span class="n">vTaskDelayUntil</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">xLastWakeTime</span><span class="p">,</span><span class="n">xFrequency</span> <span class="p">);</span>

                <span class="c1">//####Insert code here###</span>
        <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="steps">
<h2>Steps<a class="headerlink" href="#steps" title="Permalink to this headline">¶</a></h2>
<div class="section" id="build-and-run-the-uncompleted-code">
<h3>Build and run the uncompleted code<a class="headerlink" href="#build-and-run-the-uncompleted-code" title="Permalink to this headline">¶</a></h3>
<p>The code is at <code class="docutils literal notranslate"><span class="pre">embarc_osp/arc_labs/labs/lab9_freertos</span></code>, uses an UART terminal console and run the code, the following message from program is displayed:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">embARC Build Time: Mar  9 2018, 17:57:50</span>
<span class="go">Compiler Version: Metaware, 4.2.1 Compatible Clang 4.0.1 (branches/release_40)</span>
<span class="go">Create task1 Successfully</span>
<span class="go">Create task2 Successfully</span>
<span class="go">Create task3 Successfully</span>
</pre></div>
</div>
<p>This message implies that three tasks are working correctly.</p>
</div>
<div class="section" id="implement-task-3">
<h3>Implement task 3<a class="headerlink" href="#implement-task-3" title="Permalink to this headline">¶</a></h3>
<p>It is required for task 3 to retrieve new value from the queue and assign the value to led_val. The LED controls are already implemented in previous labs, the new function to learn is <code class="docutils literal notranslate"><span class="pre">xQueueReceive()</span></code>. This is a FreeRTOS API to pop and read an item from queue. See FreeRTOS documentation and complete the code for this task. (An example is in ‘complete’ folder)</p>
</div>
<div class="section" id="implement-task-1">
<h3>Implement task 1<a class="headerlink" href="#implement-task-1" title="Permalink to this headline">¶</a></h3>
<p>It is required for task 1 to check if value from queue is legal. If not, a reset signal is needed to be sent.</p>
<p>Two new functions might be helpful for this task: <code class="docutils literal notranslate"><span class="pre">xSemaphoreGive()</span></code> for release a signal and <code class="docutils literal notranslate"><span class="pre">xQueuePeek()</span></code> for read item but not pop from a queue. See FreeRTOS documentation and complete the code for this task. (An example is in ‘complete’ folder)</p>
<p>Do notice the difference between <code class="docutils literal notranslate"><span class="pre">xQueueReceive()</span></code> and <code class="docutils literal notranslate"><span class="pre">xQueuePeek()</span></code>.</p>
</div>
<div class="section" id="implement-task-2">
<h3>Implement task 2<a class="headerlink" href="#implement-task-2" title="Permalink to this headline">¶</a></h3>
<p>There are two different works for task 2 to complete: to shift led_val and queue it, and to reset both led_val and queue when illegal led_val is detected.</p>
<p>Three functions can be helpful: <code class="docutils literal notranslate"><span class="pre">xQueueSend()</span></code>, <code class="docutils literal notranslate"><span class="pre">xSemaphoreTake()</span></code>, <code class="docutils literal notranslate"><span class="pre">xQueueReset()</span></code>. See FreeRTOS documentation and complete the code for this task. (An example is in ‘complete’ folder)</p>
</div>
<div class="section" id="build-and-run-the-completed-code">
<h3>Build and run the completed code<a class="headerlink" href="#build-and-run-the-completed-code" title="Permalink to this headline">¶</a></h3>
<p>Build the completed program and debug it to fulfill all requirements. (8-digit running LEDs are used in example code)</p>
</div>
</div>
<div class="section" id="exercises">
<h2>Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">¶</a></h2>
<p>The problem of philosophers having meal:</p>
<p>Five philosophers sitting at a round dining table. Suppose they are either thinking or eating, but they cannot do these two things at the same time. So each time when they are having food, they stop thinking and vice versa. There are five forks on the table for eating noddle, each fork is placed between two adjacent philosophers. It is hard to eat noodles with one fork, so all philosophers need two forks in order to eat.</p>
<p>Write a program with proper console output to simulate this process.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="lab_dsp1.html" class="btn btn-neutral float-right" title="ARC DSP: Compiler Optimizations" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="lab7.html" class="btn btn-neutral" title="BLE Communication" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Synopsys

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>